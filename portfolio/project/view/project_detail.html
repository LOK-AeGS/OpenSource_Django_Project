{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€</title>
  <link rel="stylesheet" href="{% static 'project_detail.css' %}">
</head>
<body>
  <div class="container">
    <h1><a href="{% url 'project_list' %}" class="header-link">ğŸ” í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€</a></h1>
    <p><strong>í”„ë¡œì íŠ¸ ID:</strong> {{ project_id }}</p>

    <!-- âœ… í”„ë¡œì íŠ¸ ì„¤ëª… -->
    {% if project_detail_list %}
      <div class="project-content">
        <h2>ğŸ“„ í”„ë¡œì íŠ¸ ë‚´ìš©</h2>
        <p>{{ project_detail_list.projectContent }}</p>
      </div>
    {% else %}
      <p>â— í”„ë¡œì íŠ¸ ìƒì„¸ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}

    <hr>

    <!-- â­ ë³„ì  ë° ë¦¬ë·° ì‘ì„± -->
    <section class="review-form-section">
      <h2>ğŸ“ ë¦¬ë·° ì‘ì„±</h2>
      {% if role == "user" %}
        <form method="POST">
          {% csrf_token %}
          <label for="rating">ë³„ì  (1~5):</label>
          <select name="rating" required>
            {% for i in "12345" %}
              <option value="{{ i }}">{{ i }}ì </option>
            {% endfor %}
          </select>

          <label for="content">ë¦¬ë·° ë‚´ìš©:</label>
          <textarea name="content" rows="4" required></textarea>

          <button type="submit">ë¦¬ë·° ì‘ì„±</button>
        </form>

        {% if submitted_rating %}
          <p class="submitted-result">âœ… {{ submitted_rating }}ì ì„ ì œì¶œí–ˆìŠµë‹ˆë‹¤.</p>
        {% endif %}

      {% elif role == "admin" %}
        <p>ğŸ”’ ê´€ë¦¬ìëŠ” ë¦¬ë·°ë¥¼ ì‘ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
      {% else %}
        <p>ë¦¬ë·°ë¥¼ ì‘ì„±í•˜ë ¤ë©´ <a href="{% url 'login_page' %}">ë¡œê·¸ì¸</a>í•˜ì„¸ìš”.</p>
      {% endif %}
    </section>

    <hr>

    <!-- ğŸ’¬ ë¦¬ë·° ëª©ë¡ -->
    <section class="review-list-section">
      <h2>ğŸ’¬ ë¦¬ë·° ëª©ë¡</h2>
      {% if project_review_list %}
        <ul class="review-list">
          {% for review in project_review_list %}
            <li class="review-item">
              <strong>{{ review.userName }}</strong> | â­ {{ review.projectReviewStar }}ì 
              <p>{{ review.projectReviewContent }}</p>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p>ë“±ë¡ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
      {% endif %}
    </section>

  </div>
</body>
</html>
